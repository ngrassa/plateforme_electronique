{"ast":null,"code":"var _process$env$REACT_AP;\nconst API_BASE = ((_process$env$REACT_AP = process.env.REACT_APP_API_URL) === null || _process$env$REACT_AP === void 0 ? void 0 : _process$env$REACT_AP.trim()) || 'http://localhost:8080';\nconst parseJson = async response => {\n  if (!response.ok) {\n    const message = await response.text();\n    throw new Error(message || 'Erreur API');\n  }\n  return response.json();\n};\nexport const getInvoices = async ({\n  ownerUserId,\n  page = 0,\n  size = 10\n}) => {\n  const url = new URL(`${API_BASE}/api/invoices`);\n  url.searchParams.set('ownerUserId', ownerUserId);\n  url.searchParams.set('page', String(page));\n  url.searchParams.set('size', String(size));\n  return parseJson(await fetch(url.toString()));\n};\nexport const getPayments = async () => {\n  return parseJson(await fetch(`${API_BASE}/api/payments`));\n};\nexport const createInvoice = async payload => {\n  return parseJson(await fetch(`${API_BASE}/api/invoices`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(payload)\n  }));\n};","map":{"version":3,"names":["API_BASE","_process$env$REACT_AP","process","env","REACT_APP_API_URL","trim","parseJson","response","ok","message","text","Error","json","getInvoices","ownerUserId","page","size","url","URL","searchParams","set","String","fetch","toString","getPayments","createInvoice","payload","method","headers","body","JSON","stringify"],"sources":["/home/osboxes/plateforme_electronique/frontend/src/api/gateway.ts"],"sourcesContent":["const API_BASE =\n  process.env.REACT_APP_API_URL?.trim() || 'http://localhost:8080';\n\nexport type InvoiceStatus =\n  | 'DRAFT'\n  | 'VALIDATED'\n  | 'SENT'\n  | 'PAID'\n  | 'CANCELLED';\n\nexport type InvoiceItemPayload = {\n  description: string;\n  quantity: number;\n  unitPrice: number;\n  taxRate?: number;\n};\n\nexport type InvoicePayload = {\n  ownerUserId: string;\n  clientName: string;\n  clientEmail: string;\n  billingAddress?: string;\n  vatRate?: number;\n  issueDate?: string;\n  dueDate?: string;\n  items: InvoiceItemPayload[];\n};\n\nexport type Invoice = {\n  id: string;\n  invoiceNumber?: string;\n  clientName?: string;\n  clientEmail?: string;\n  billingAddress?: string;\n  subtotalHt?: number;\n  vatRate?: number;\n  vatAmount?: number;\n  totalTtc?: number;\n  status: InvoiceStatus;\n  issueDate?: string;\n  dueDate?: string;\n  createdAt?: string;\n};\n\nexport type InvoicePage = {\n  content: Invoice[];\n  totalElements: number;\n  totalPages: number;\n  number: number;\n  size: number;\n};\n\nexport type PaymentStatus = 'PENDING' | 'COMPLETED' | 'FAILED' | 'REFUNDED';\n\nexport type Payment = {\n  id: string;\n  reference: string;\n  invoiceId: string;\n  userId: string;\n  amount: number;\n  currency: string;\n  method: 'CARD' | 'BANK_TRANSFER' | 'CASH' | 'CHECK';\n  status: PaymentStatus;\n  paymentDate?: string;\n  createdAt?: string;\n};\n\nconst parseJson = async <T>(response: Response): Promise<T> => {\n  if (!response.ok) {\n    const message = await response.text();\n    throw new Error(message || 'Erreur API');\n  }\n  return response.json() as Promise<T>;\n};\n\nexport const getInvoices = async ({\n  ownerUserId,\n  page = 0,\n  size = 10,\n}: {\n  ownerUserId: string;\n  page?: number;\n  size?: number;\n}): Promise<InvoicePage> => {\n  const url = new URL(`${API_BASE}/api/invoices`);\n  url.searchParams.set('ownerUserId', ownerUserId);\n  url.searchParams.set('page', String(page));\n  url.searchParams.set('size', String(size));\n  return parseJson<InvoicePage>(await fetch(url.toString()));\n};\n\nexport const getPayments = async (): Promise<Payment[]> => {\n  return parseJson<Payment[]>(await fetch(`${API_BASE}/api/payments`));\n};\n\nexport const createInvoice = async (\n  payload: InvoicePayload\n): Promise<Invoice> => {\n  return parseJson<Invoice>(\n    await fetch(`${API_BASE}/api/invoices`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(payload),\n    })\n  );\n};\n"],"mappings":";AAAA,MAAMA,QAAQ,GACZ,EAAAC,qBAAA,GAAAC,OAAO,CAACC,GAAG,CAACC,iBAAiB,cAAAH,qBAAA,uBAA7BA,qBAAA,CAA+BI,IAAI,CAAC,CAAC,KAAI,uBAAuB;AAkElE,MAAMC,SAAS,GAAG,MAAUC,QAAkB,IAAiB;EAC7D,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;IAChB,MAAMC,OAAO,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;IACrC,MAAM,IAAIC,KAAK,CAACF,OAAO,IAAI,YAAY,CAAC;EAC1C;EACA,OAAOF,QAAQ,CAACK,IAAI,CAAC,CAAC;AACxB,CAAC;AAED,OAAO,MAAMC,WAAW,GAAG,MAAAA,CAAO;EAChCC,WAAW;EACXC,IAAI,GAAG,CAAC;EACRC,IAAI,GAAG;AAKT,CAAC,KAA2B;EAC1B,MAAMC,GAAG,GAAG,IAAIC,GAAG,CAAC,GAAGlB,QAAQ,eAAe,CAAC;EAC/CiB,GAAG,CAACE,YAAY,CAACC,GAAG,CAAC,aAAa,EAAEN,WAAW,CAAC;EAChDG,GAAG,CAACE,YAAY,CAACC,GAAG,CAAC,MAAM,EAAEC,MAAM,CAACN,IAAI,CAAC,CAAC;EAC1CE,GAAG,CAACE,YAAY,CAACC,GAAG,CAAC,MAAM,EAAEC,MAAM,CAACL,IAAI,CAAC,CAAC;EAC1C,OAAOV,SAAS,CAAc,MAAMgB,KAAK,CAACL,GAAG,CAACM,QAAQ,CAAC,CAAC,CAAC,CAAC;AAC5D,CAAC;AAED,OAAO,MAAMC,WAAW,GAAG,MAAAA,CAAA,KAAgC;EACzD,OAAOlB,SAAS,CAAY,MAAMgB,KAAK,CAAC,GAAGtB,QAAQ,eAAe,CAAC,CAAC;AACtE,CAAC;AAED,OAAO,MAAMyB,aAAa,GAAG,MAC3BC,OAAuB,IACF;EACrB,OAAOpB,SAAS,CACd,MAAMgB,KAAK,CAAC,GAAGtB,QAAQ,eAAe,EAAE;IACtC2B,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,OAAO;EAC9B,CAAC,CACH,CAAC;AACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}